<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ë³„ë˜¥ë³„ ì¡ê¸° ê²Œì„ âœ¨</title>
<style>
body {
  margin: 0;
  overflow: hidden;
  background: linear-gradient(to bottom, #0b0c1a, #1a1740);
  height: 100vh;
  font-family: 'Press Start 2P', monospace;
  color: white;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
}

h1 {
  font-size: 16px;
  margin-top: 20px;
  color: #ffdd55;
  text-shadow: 0 0 5px #fff;
}

#game {
  position: relative;
  width: 100%;
  height: 80vh;
  overflow: hidden;
}

/* ì¤‘ì•™ ì˜ì—­ ì‹œê°ì  í‘œì‹œ */
#playArea {
  position: absolute;
  top: 20%;
  left: 20%;
  width: 60%;
  height: 60%;
  border: 2px dashed rgba(255, 255, 255, 0.3);
  background: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  pointer-events: none;
}

.star {
  position: absolute;
  background: yellow;
  box-shadow: 0 0 6px 3px white;
  border-radius: 50%;
  image-rendering: pixelated;
  cursor: pointer;
}

#score, #timer {
  font-size: 14px;
  margin: 5px;
  text-shadow: 0 0 4px #fff;
}

#wish {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 18px;
  color: #ffccff;
  text-shadow: 0 0 10px #fff;
  opacity: 0;
  transition: opacity 0.4s ease-out;
}

#startScreen, #end {
  position: absolute;
  top: 40%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

#startBtn, #restart {
  margin-top: 15px;
  padding: 8px 12px;
  background: #ffdd55;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 12px;
  color: #333;
  font-family: inherit;
}

#startBtn:hover, #restart:hover {
  background: #ffe67f;
}

#end {
  display: none;
}
</style>
</head>

<body>
<h1>ğŸŒ  ë³„ë˜¥ë³„ ì¡ê¸° ê²Œì„ ğŸŒ </h1>
<div id="score">ì ìˆ˜: 0</div>
<div id="timer">ë‚¨ì€ ì‹œê°„: 20ì´ˆ</div>

<div id="game">
  <div id="playArea"></div>
</div>

<div id="wish">Make a wish!</div>

<!-- ì‹œì‘ í™”ë©´ -->
<div id="startScreen">
  <h2>ë³„ë˜¥ë³„ì„ ì¡ì•„ë³´ì„¸ìš”!</h2>
  <button id="startBtn">ê²Œì„ ì‹œì‘</button>
</div>

<!-- ì¢…ë£Œ í™”ë©´ -->
<div id="end">
  <h2>ê²Œì„ ì¢…ë£Œ!</h2>
  <p id="finalScore"></p>
  <button id="restart">ë‹¤ì‹œ í•˜ê¸°</button>
</div>

<script>
const game = document.getElementById('game');
const playArea = document.getElementById('playArea');
const scoreDisplay = document.getElementById('score');
const timerDisplay = document.getElementById('timer');
const wishText = document.getElementById('wish');
const startScreen = document.getElementById('startScreen');
const endScreen = document.getElementById('end');
const finalScore = document.getElementById('finalScore');
const startBtn = document.getElementById('startBtn');
const restartBtn = document.getElementById('restart');

let score = 0;
let timeLeft = 20;
let gameInterval;
let timerInterval;
let gameActive = false;

function random(min, max) {
  return Math.random() * (max - min) + min;
}

function createStar() {
  if (!gameActive) return;

  const star = document.createElement('div');
  star.classList.add('star');

  // â­ ë³„ í¬ê¸° 50% ì¦ê°€ (ê¸°ì¡´ 8~14 â†’ 12~21)
  const size = random(12, 21);
  star.style.width = `${size}px`;
  star.style.height = `${size}px`;

  // í”Œë ˆì´ ì˜ì—­ ê¸°ì¤€ìœ¼ë¡œ ë³„ ìœ„ì¹˜ ê³„ì‚°
  const playRect = playArea.getBoundingClientRect();
  const minX = playRect.left;
  const maxX = playRect.right - size;
  const startX = random(minX, maxX);
  star.style.left = `${startX}px`;

  // y ë²”ìœ„: playAreaì˜ ìœ„ìª½ì—ì„œ ì‹œì‘, ì•„ë˜ìª½ í…Œë‘ë¦¬ê¹Œì§€
  const startY = playRect.top - size;
  const endY = playRect.bottom - size;
  star.style.top = `${startY}px`;

  const fallSpeed = random(2, 4);
  game.appendChild(star);

  const fall = setInterval(() => {
    if (!gameActive) {
      clearInterval(fall);
      star.remove();
      return;
    }

    star.style.top = `${star.offsetTop + fallSpeed}px`;

    // playAreaì˜ ì•„ë˜ í…Œë‘ë¦¬ì— ë‹¿ìœ¼ë©´ ì œê±°
    const starRect = star.getBoundingClientRect();
    if (starRect.bottom >= playRect.bottom) {
      star.remove();
      clearInterval(fall);
    }
  }, 16);

  star.addEventListener('click', () => {
    score++;
    scoreDisplay.textContent = `ì ìˆ˜: ${score}`;
    star.remove();
    showWish();
  });
}

function showWish() {
  wishText.style.opacity = 1;
  setTimeout(() => {
    wishText.style.opacity = 0;
  }, 600);
}

function startGame() {
  startScreen.style.display = 'none';
  endScreen.style.display = 'none';
  score = 0;
  timeLeft = 20;
  gameActive = true;
  scoreDisplay.textContent = `ì ìˆ˜: 0`;
  timerDisplay.textContent = `ë‚¨ì€ ì‹œê°„: 20ì´ˆ`;

  gameInterval = setInterval(createStar, 500);
  timerInterval = setInterval(() => {
    timeLeft--;
    timerDisplay.textContent = `ë‚¨ì€ ì‹œê°„: ${timeLeft}ì´ˆ`;
    if (timeLeft <= 0) endGame();
  }, 1000);
}

function endGame() {
  gameActive = false;
  clearInterval(gameInterval);
  clearInterval(timerInterval);
  document.querySelectorAll('.star').forEach(s => s.remove());
  finalScore.textContent = `ìµœì¢… ì ìˆ˜: ${score}`;
  endScreen.style.display = 'block';
}

startBtn.addEventListener('click', startGame);
restartBtn.addEventListener('click', startGame);
</script>
</body>
</html>
